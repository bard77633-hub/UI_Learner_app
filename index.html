<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bad UI vs Good UI - æƒ…å ±â… å­¦ç¿’æ•™æ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- React & Libraries (CDN) -->
    <!-- Note: Order is important -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .bad-ui-container * { font-family: "Times New Roman", "MS Mincho", "Hiragino Mincho ProN", serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .blinking-text { animation: blink 1s linear infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* Custom scrollbar for better UX in overlays */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "recharts": "https://aistudiocdn.com/recharts@^3.5.0"
  }
}
</script>
</head>
<body class="bg-slate-50 text-slate-900 h-screen overflow-hidden">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        // Ensure libraries are available
        const { useState, useEffect, useRef } = React;
        const RechartsObj = window.Recharts;
        
        if (!RechartsObj) {
            console.error("Recharts failed to load");
            document.getElementById('root').innerHTML = '<div class="p-4 text-red-600">Error: Library loading failed. Please check your internet connection.</div>';
        }

        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } = RechartsObj;

        // --- Icons (SVG Components) ---
        // Replacing lucide-react imports with direct SVG to avoid build steps
        const Icon = ({ d, size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d={d} />
            </svg>
        );
        
        const Icons = {
            Mail: (p) => <Icon {...p} d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z M22 6l-10 7L2 6" />,
            Lock: (p) => <Icon {...p} d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />, 
            LockSimple: (p) => <Icon {...p} d="M19 11H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm-7-7a5 5 0 0 0-5 5v3h10V9a5 5 0 0 0-5-5z" />,
            User: (p) => <Icon {...p} d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8" />,
            Eye: (p) => <Icon {...p} d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z M12 5c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7zm0 3c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z" />,
            EyeOff: (p) => <Icon {...p} d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22" />,
            Check: (p) => <Icon {...p} d="M20 6 9 17l-5-5" />,
            CheckCircle: (p) => <Icon {...p} d="M22 11.08V12a10 10 0 1 1-5.93-9.14 M22 4 12 14.01l-3-3" />,
            CheckCircle2: (p) => <Icon {...p} d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z m-1-5l-4-4 1.41-1.41L11 14.17l7.59-7.59L20 8l-9 9z" />,
            AlertTriangle: (p) => <Icon {...p} d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z M12 9v4 M12 17h.01" />,
            ArrowRight: (p) => <Icon {...p} d="M5 12h14 M12 5l7 7-7 7" />,
            RefreshCw: (p) => <Icon {...p} d="M23 4v6h-6 M1 20v-6h6 M3.51 9a9 9 0 0 1 14.85-3.36L23 10 M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />,
            MapPin: (p) => <Icon {...p} d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />,
            Phone: (p) => <Icon {...p} d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
            AlertCircle: (p) => <Icon {...p} d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z M12 8v4 M12 16h.01" />,
            MousePointer2: (p) => <Icon {...p} d="m12 6 4 5h4l-6 5.25 1.5 6.5L10 18l-5.5 4.75L6 16.25 0 11h4z" />,
            ThumbsUp: (p) => <Icon {...p} d="M7 10v12 M15 10.41V7a4 4 0 0 0-8 0v4H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h13.29a2 2 0 0 0 1.92-1.47L20.6 11.48A2 2 0 0 0 18.68 10h-3.68z" />,
            ThumbsDown: (p) => <Icon {...p} d="M17 14V2 M9 13.59V17a4 4 0 0 0 8 0v-4h4a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H7.71a2 2 0 0 0-1.92 1.47L3.4 12.52A2 2 0 0 0 5.32 14h3.68z" />,
            ClipboardList: (p) => <Icon {...p} d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2 M15 2h-6a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z M8 11h4 M8 16h6" />,
            ChevronDown: (p) => <Icon {...p} d="m6 9 6 6 6-6" />,
            ChevronUp: (p) => <Icon {...p} d="m18 15-6-6-6 6" />,
        };

        // --- Data & Types ---
        const TASKS = {
            email: {
                id: 'email',
                title: 'ãƒ¡ãƒ¼ãƒ«ãƒã‚¬ã‚¸ãƒ³ç™»éŒ²',
                description: 'å…¥åŠ›ãƒŸã‚¹ã®èµ·ãã‚„ã™ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›æ¬„ã®UIæ¯”è¼ƒ',
                instruction: 'ä»¥ä¸‹ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚\nå¯¾è±¡: taro.yamada@example.com'
            },
            password: {
                id: 'password',
                title: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š',
                description: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨åˆ©ä¾¿æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å­¦ã¶UIæ¯”è¼ƒ',
                instruction: 'ä»¥ä¸‹ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: M3@zP7$q'
            },
            profile: {
                id: 'profile',
                title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç™»éŒ²',
                description: 'ä½æ‰€ã‚„é›»è©±ç•ªå·ãªã©ã€å®šå‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å…¥åŠ›UIæ¯”è¼ƒ',
                instruction: 'ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\næ°å: å±±ç”° å¤ªéƒ\né›»è©±: 090-1234-5678\nä½æ‰€: 123-4567 æ±äº¬éƒ½æ–°å®¿åŒº1-1'
            }
        };

        // --- Service: Feedback Logic ---
        const generateFeedback = (taskType, result) => {
            const taskName = TASKS[taskType].title;
            const timeDiff = (result.bad.timeTaken - result.good.timeTaken) / 1000;
            const clickDiff = result.bad.clickCount - result.good.clickCount;
            const mistakeDiff = result.bad.mistakes - result.good.mistakes;

            let feedback = `ã€${taskName}ã®åˆ†æçµæœã€‘\n\n`;

            if (timeDiff > 5) {
                feedback += `â± **æ™‚é–“ã®é•ã„**: æ‚ªã„UIã§ã¯è‰¯ã„UIã‚ˆã‚Š${timeDiff.toFixed(1)}ç§’ã‚‚å¤šãæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã­ã€‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä¹±ã‚Œã‚„å…¥åŠ›é …ç›®ã®ã‚ã‹ã‚Šã«ãã•ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆ¤æ–­ã‚’é…ã‚‰ã›ã‚‹ä¸»ãªåŸå› ã§ã™ã€‚\n\n`;
            } else if (timeDiff > 0) {
                feedback += `â± **æ™‚é–“ã®é•ã„**: è‰¯ã„UIã®æ–¹ãŒ${timeDiff.toFixed(1)}ç§’æ—©ãå®Œäº†ã§ãã¾ã—ãŸã€‚æ•´ç†ã•ã‚ŒãŸæƒ…å ±ã¯ã€è„³ã®å‡¦ç†è² è·ã‚’ä¸‹ã’ã¦ã‚¹ãƒ ãƒ¼ã‚ºãªæ“ä½œã‚’å°ãã¾ã™ã€‚\n\n`;
            } else {
                feedback += `â± **æ™‚é–“ã®é•ã„**: é©šãã¹ãã“ã¨ã«ã€æ™‚é–“ã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã­ï¼ã—ã‹ã—ã€ã‚¹ãƒˆãƒ¬ã‚¹ã®æ„Ÿã˜æ–¹ã¯ã©ã†ã§ã—ãŸã‹ï¼Ÿ\n\n`;
            }

            if (result.bad.mistakes > 0) {
                feedback += `âš ï¸ **ãƒŸã‚¹ã®ç™ºç”Ÿ**: æ‚ªã„UIã§ã¯${result.bad.mistakes}å›ã®ãƒŸã‚¹ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å…¥åŠ›ãƒ«ãƒ¼ãƒ«ã®èª¬æ˜ä¸è¶³ã‚„ã€ç´›ã‚‰ã‚ã—ã„ãƒœã‚¿ãƒ³é…ç½®ï¼ˆãƒ€ãƒ¼ã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªå·±è‚¯å®šæ„Ÿã‚’ä¸‹ã’ã¦ã—ã¾ã„ã¾ã™ã€‚\n\n`;
            }

            if (clickDiff > 3) {
                feedback += `ğŸ–± **æ“ä½œã®æ‰‹æ•°**: æ‚ªã„UIã¯ã‚¯ãƒªãƒƒã‚¯æ•°ãŒ${clickDiff}å›ã‚‚å¤šããªã£ã¦ã„ã¾ã™ã€‚ã‚¿ãƒ–ç§»å‹•ï¼ˆTabã‚­ãƒ¼ï¼‰ã®é †åºãŒç‹‚ã£ã¦ã„ãŸã‚Šã€ã‚¯ãƒªãƒƒã‚¯é ˜åŸŸãŒç‹­ã‹ã£ãŸã‚Šã™ã‚‹ã¨ã€ç„¡é§„ãªæ“ä½œãŒå¢—ãˆã¾ã™ã€‚\n\n`;
            }

            feedback += `ğŸ’¡ **ã¾ã¨ã‚**: \nè‰¯ã„UIã¨ã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è€ƒãˆã•ã›ãªã„ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã™ã€‚ãƒ©ãƒ™ãƒ«ã®æ˜ç¢ºã•ã€ã‚¨ãƒ©ãƒ¼ã®è¦ªåˆ‡ãªè¡¨ç¤ºã€è¦–ç·šã®æµã‚Œã‚’æ„è­˜ã—ãŸé…ç½®ã€‚ã“ã‚Œã‚‰ãŒæƒã†ã“ã¨ã§ã€èª°ã‚‚ãŒè¿·ã‚ãšä½¿ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ã«ãªã‚Šã¾ã™ã€‚`;

            return feedback;
        };

        // --- Component: BadForm ---
        const BadForm = ({ taskType, onComplete, onMistake }) => {
            const [formData, setFormData] = useState({
                name: '', zip: '', addr: '', badPref: '', badCity: '', tel: '', email: '', emailConfirm: '', pass: '', passConfirm: ''
            });
            const [agreed, setAgreed] = useState(false);

            const handleChange = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const handleEmailSubmit = () => {
                if (!formData.email.includes('@')) { alert('ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ 0x0001'); onMistake(); return; }
                if (formData.email !== 'taro.yamada@example.com') { alert('æ¤œè¨¼å¤±æ•—: å…¥åŠ›å€¤ãŒæœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ä¸€è‡´ã—ã¾ã›ã‚“ã€‚'); onMistake(); return; }
                if (formData.email !== formData.emailConfirm) { alert('ã‚¨ãƒ©ãƒ¼: ç¢ºèªç”¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚'); onMistake(); return; }
                onComplete();
            };

            const handlePasswordSubmit = () => {
                if (formData.pass !== 'M3@zP7$q') {
                    setFormData(prev => ({ ...prev, pass: '', passConfirm: '' }));
                    alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ‹’å¦: ãƒãƒªã‚·ãƒ¼é•åã¾ãŸã¯ä¸æ­£ãªæ–‡å­—åˆ—ã§ã™ã€‚');
                    onMistake();
                    return;
                }
                if (formData.pass !== formData.passConfirm) {
                     alert('ç¢ºèªä¸ä¸€è‡´: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚');
                     setFormData(prev => ({ ...prev, passConfirm: '' }));
                     onMistake();
                     return;
                }
                if (!agreed) {
                    alert('ã‚¨ãƒ©ãƒ¼: å¿…é ˆæ¡ä»¶ã«åŒæ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚');
                    onMistake();
                    return;
                }
                onComplete();
            };

            const handleProfileSubmit = () => {
                if (!formData.name || !formData.tel) { alert('NULLå€¤ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚'); onMistake(); return; }
                if (formData.tel.includes('-')) { alert('å½¢å¼ã‚¨ãƒ©ãƒ¼: DBã‚«ãƒ©ãƒ ã«ã¯æ•°å­—ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ï¼ˆãƒã‚¤ãƒ•ãƒ³ä¸å¯ï¼‰ã€‚'); onMistake(); return; }
                if (!formData.zip) { alert('éƒµä¾¿ã‚³ãƒ¼ãƒ‰æ¬ è½'); onMistake(); return; }
                
                // Bad UI specific validation for annoying dropdowns
                if (formData.badPref !== '13') { alert('åœ°åŸŸã‚³ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: é¸æŠã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯ç„¡åŠ¹ã§ã™ã€‚'); onMistake(); return; }
                if (formData.badCity !== '104') { alert('è‡ªæ²»ä½“IDã‚¨ãƒ©ãƒ¼: é¸æŠã•ã‚ŒãŸIDã¯ç„¡åŠ¹ã§ã™ã€‚'); onMistake(); return; }
                if (!formData.addr) { alert('è©³ç´°ä½æ‰€ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚'); onMistake(); return; }

                onComplete();
            };

            const handleSubmit = () => {
                if (taskType === 'email') handleEmailSubmit();
                if (taskType === 'password') handlePasswordSubmit();
                if (taskType === 'profile') handleProfileSubmit();
            };

            const handleReset = () => {
                setFormData({ name: '', zip: '', addr: '', badPref: '', badCity: '', tel: '', email: '', emailConfirm: '', pass: '', passConfirm: '' });
                setAgreed(false);
                onMistake(); 
            };

            const fakeShowPassword = () => {
                alert("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: ç”»é¢ä¸Šã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã¯å±é™ºã§ã‚ã‚Šã€ITãƒãƒªã‚·ãƒ¼ã«ã‚ˆã‚Šç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚");
                onMistake();
            };

            return (
                <div className="bad-ui-container p-6 bg-[#e0e0e0] text-[#333] h-full flex flex-col border-8 border-inset border-gray-400 overflow-y-auto font-serif">
                    <div className="bg-blue-900 text-white p-2 mb-6 text-center">
                         <h2 className="text-xl font-serif tracking-widest">ADMIN_CONSOLE_V1</h2>
                    </div>
                    
                    <div className="flex flex-col gap-8 w-full max-w-lg mx-auto">
                        
                        {taskType === 'email' && (
                          <div className="border-2 border-black p-4 bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                            <p className="text-sm mb-2 font-bold uppercase decoration-double underline">REGISTRATION WIZARD</p>
                            <div className="flex flex-col gap-4">
                               <div>
                                    <label className="text-xs font-bold block mb-1">ç¬¬ä¸€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä¸»ï¼‰:</label>
                                    <input 
                                        type="text" 
                                        value={formData.email}
                                        onChange={(e) => handleChange('email', e.target.value)}
                                        className="border-2 border-blue-800 bg-blue-50 p-1 w-full text-sm"
                                        placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å(at)ãƒ‰ãƒ¡ã‚¤ãƒ³"
                                    />
                               </div>
                               <div>
                                    <label className="text-xs font-bold block mb-1">ç¢ºèªç”¨ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä¸»ï¼‰:</label>
                                    <input 
                                        type="text" 
                                        value={formData.emailConfirm}
                                        onChange={(e) => handleChange('emailConfirm', e.target.value)}
                                        onPaste={(e) => { e.preventDefault(); alert('ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚è²¼ã‚Šä»˜ã‘ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚'); }}
                                        className="border-2 border-red-800 bg-red-50 p-1 w-full text-sm"
                                    />
                                    <span className="text-[10px] text-red-600">â€» ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆå³ç¦</span>
                               </div>
                            </div>
                          </div>
                        )}

                        {taskType === 'password' && (
                          <div className="border border-gray-400 p-6 bg-gray-200">
                            <p className="text-xs mb-4 text-center font-mono text-red-600 blinking-text">!! SECURE AREA !!</p>
                            <div className="flex flex-col gap-4">
                               <div className="relative">
                                   <label className="text-sm font-bold text-gray-500">ç§˜å¯†æ–‡å­—åˆ—ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰:</label>
                                   <div className="flex gap-1">
                                        <input 
                                            type="password"
                                            value={formData.pass}
                                            onChange={(e) => handleChange('pass', e.target.value)}
                                            className="bg-gray-600 text-gray-800 font-mono p-1 w-full border border-gray-700"
                                            autoComplete="new-password"
                                        />
                                        <button onClick={fakeShowPassword} className="bg-gray-300 border border-gray-500 p-1" title="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¡¨ç¤º">
                                            <Icons.Eye size={16} className="text-gray-500" />
                                        </button>
                                   </div>
                                   <p className="text-[9px] text-gray-400 mt-1">å¤§æ–‡å­—å°æ–‡å­—åŒºåˆ¥ã€‚è‹±æ•°å­—è¨˜å·å¿…é ˆã€‚</p>
                               </div>

                               <div>
                                   <label className="text-sm font-bold text-gray-500">æ¤œè¨¼ç”¨æ–‡å­—åˆ—:</label>
                                   <input 
                                        type="password"
                                        value={formData.passConfirm}
                                        onChange={(e) => handleChange('passConfirm', e.target.value)}
                                        className="bg-gray-600 text-gray-800 font-mono p-1 w-full border border-gray-700"
                                   />
                               </div>

                               <div className="border border-dotted border-black p-2 bg-yellow-100">
                                  <div className="flex items-start gap-2">
                                      <input type="checkbox" className="mt-1" checked={agreed} onChange={(e) => setAgreed(e.target.checked)} />
                                      <span className="text-[10px] leading-tight font-bold">
                                        å¿…é ˆ: ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ¡ãƒ¼ãƒ«ã€ç¬¬ä¸‰è€…ã‹ã‚‰ã®ææ¡ˆã€æ—¥åˆŠãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼ã®å—ä¿¡ã«åŒæ„ã—ã¾ã™ã€‚ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™ã¨ç™»éŒ²ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã™ã€‚
                                      </span>
                                  </div>
                               </div>
                            </div>
                          </div>
                        )}

                        {taskType === 'profile' && (
                          <div className="space-y-6 font-mono text-sm">
                             <div className="bg-white border border-black p-2">
                                 <div className="flex flex-col mb-4">
                                    <label className="text-xs mb-1">é¡§å®¢è­˜åˆ¥åï¼ˆå§“ åï¼‰:</label>
                                    <input type="text" value={formData.name} onChange={(e) => handleChange('name', e.target.value)} className="border-b-2 border-black bg-gray-100 outline-none px-1" />
                                 </div>

                                 <div className="mb-4">
                                     <label className="text-[10px]">éƒµä¾¿åœ°åŸŸã‚³ãƒ¼ãƒ‰:</label>
                                     <input type="text" value={formData.zip} onChange={(e) => handleChange('zip', e.target.value)} className="w-full border border-black" />
                                 </div>

                                 {/* Annoying Address Selection for Bad UI */}
                                 <div className="flex flex-wrap gap-2 mb-4 bg-gray-100 p-1 border border-dotted border-gray-500">
                                    <div className="w-full">
                                        <label className="text-[10px] block mb-1">JISéƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰:</label>
                                        <select 
                                            value={formData.badPref} 
                                            onChange={(e) => handleChange('badPref', e.target.value)} 
                                            className="w-full border border-black text-xs h-8"
                                        >
                                            <option value="">-- é¸æŠã—ã¦ãã ã•ã„ --</option>
                                            <option value="01">01: HOKKAIDO</option>
                                            <option value="02">02: AOMORI</option>
                                            <option value="11">11: SAITAMA</option>
                                            <option value="12">12: CHIBA</option>
                                            <option value="13">13: TOKYO</option>
                                            <option value="14">14: KANAGAWA</option>
                                            <option value="27">27: OSAKA</option>
                                            <option value="47">47: OKINAWA</option>
                                        </select>
                                    </div>
                                    <div className="w-full">
                                        <label className="text-[10px] block mb-1">è‡ªæ²»ä½“ID (å¸‚åŒºç”ºæ‘):</label>
                                        <select 
                                            value={formData.badCity} 
                                            onChange={(e) => handleChange('badCity', e.target.value)} 
                                            className="w-full border border-black text-xs h-8"
                                        >
                                            <option value="">-- IDã‚’é¸æŠ --</option>
                                            <option value="101">101: CHIYODA</option>
                                            <option value="102">102: CHUO</option>
                                            <option value="103">103: MINATO</option>
                                            <option value="104">104: SHINJUKU</option>
                                            <option value="105">105: BUNKYO</option>
                                            <option value="201">201: HACHIOJI</option>
                                        </select>
                                    </div>
                                    <div className="w-full">
                                        <label className="text-[10px] block mb-1">æ®‹ã‚Šã®ä½æ‰€æ–‡å­—åˆ—:</label>
                                        <input type="text" value={formData.addr} onChange={(e) => handleChange('addr', e.target.value)} className="w-full border border-black" />
                                    </div>
                                 </div>

                                 <div className="flex items-center gap-2 border-t border-black pt-2">
                                    <label className="text-xs">é€£çµ¡ç”¨æ•°å­—åˆ—:</label>
                                    <input type="text" value={formData.tel} onChange={(e) => handleChange('tel', e.target.value)} className="bg-yellow-50 border border-yellow-500 p-1 flex-grow" placeholder="09012345678" />
                                 </div>
                             </div>
                          </div>
                        )}

                        <div className="flex justify-between items-center mt-8 bg-gray-300 p-4 rounded border-t-4 border-gray-500">
                          <button onClick={handleSubmit} className="bg-gray-500 text-gray-200 px-4 py-1 text-xs hover:bg-gray-600 border border-gray-600 shadow-inner">
                            EXECUTE SUBMIT
                          </button>
                          <button onClick={handleReset} className="bg-blue-600 text-white px-8 py-3 text-lg font-bold hover:bg-blue-700 border-4 border-blue-800 shadow-lg rounded">
                            CLEAR FORM
                          </button>
                        </div>
                        
                        <div className="text-center text-[10px] text-red-600 font-bold animate-pulse">
                           {taskType === 'password' ? 'è­¦å‘Š: Caps Lockã‚’ç„¡åŠ¹åŒ–ã—ã¦ãã ã•ã„' : 'SYSTEM READY'}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Component: GoodForm ---
        const GoodForm = ({ taskType, onComplete, onMistake }) => {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [showPassword, setShowPassword] = useState(false);
            
            const [lastName, setLastName] = useState('');
            const [firstName, setFirstName] = useState('');
            const [zip, setZip] = useState('');
            const [pref, setPref] = useState('');
            const [city, setCity] = useState('');
            const [street, setStreet] = useState('');
            const [tel, setTel] = useState('');

            const [errors, setErrors] = useState({});

            const validate = () => {
                const newErrors = {};
                let isValid = true;

                if (taskType === 'email') {
                    if (!email.includes('@')) { newErrors.email = 'æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (@ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“)'; isValid = false; }
                    else if (email !== 'taro.yamada@example.com') { newErrors.email = 'æŒ‡ç¤ºã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ä¸€è‡´ã—ã¾ã›ã‚“ã€‚'; isValid = false; }
                }
                if (taskType === 'password') {
                    if (password.length < 8) { newErrors.password = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚'; isValid = false; }
                    if (password !== 'M3@zP7$q') { newErrors.password = 'æŒ‡ç¤ºã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ä¸€è‡´ã—ã¾ã›ã‚“ã€‚'; isValid = false; }
                }
                if (taskType === 'profile') {
                    if (!lastName || !firstName) { newErrors.name = 'æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'; isValid = false; }
                    if (!zip.match(/^\d{3}-?\d{4}$/)) { newErrors.zip = 'éƒµä¾¿ç•ªå·ã‚’ç¢ºèªã—ã¦ãã ã•ã„'; isValid = false; }
                    if (!tel.match(/^0\d{1,4}-?\d{1,4}-?\d{3,4}$/)) { newErrors.tel = 'é›»è©±ç•ªå·ã‚’ç¢ºèªã—ã¦ãã ã•ã„'; isValid = false; }
                    if (!pref || !city || !street) { newErrors.addr = 'ä½æ‰€ã‚’å®Œäº†ã—ã¦ãã ã•ã„'; isValid = false; }
                }

                setErrors(newErrors);
                if (!isValid) onMistake();
                return isValid;
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (validate()) onComplete();
            };

            // Auto-fill logic for Good UI
            const handleAddressSearch = () => {
                // Remove hyphens for easier checking
                const rawZip = zip.replace(/-/g, '');
                if (rawZip === '1234567') {
                    setPref('Tokyo'); // Matches the value in select
                    setCity('æ–°å®¿åŒº');
                    setErrors(prev => ({...prev, zip: ''})); // Clear zip errors
                } else {
                    alert('è©²å½“ã™ã‚‹ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ï¼ˆãƒ†ã‚¹ãƒˆç”¨éƒµä¾¿ç•ªå·: 123-4567ï¼‰');
                    // In a real app, this would show inline, but alert is fine for demonstration here
                }
            };

            return (
                <div className="max-w-xl mx-auto p-8 bg-white rounded-xl shadow-sm border border-slate-200 my-8">
                  <h2 className="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                     {taskType === 'email' && <Icons.Mail className="text-blue-500"/>}
                     {taskType === 'password' && <Icons.LockSimple className="text-blue-500"/>}
                     {taskType === 'profile' && <Icons.User className="text-blue-500"/>}
                     
                     {taskType === 'email' && 'ãƒ¡ãƒ¼ãƒ«ãƒã‚¬ã‚¸ãƒ³ç™»éŒ²'}
                     {taskType === 'password' && 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š'}
                     {taskType === 'profile' && 'åŸºæœ¬æƒ…å ±ç™»éŒ²'}
                  </h2>
                  
                  <form onSubmit={handleSubmit}>
                    
                    {taskType === 'email' && (
                      <div className="space-y-6">
                         <div>
                            <label className="block font-bold text-slate-700 mb-2">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <div className="relative">
                              <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"><Icons.Mail size={20} /></div>
                              <input
                                type="email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                placeholder="taro.yamada@example.com"
                                className={`w-full pl-10 pr-4 py-3 border rounded-lg outline-none transition-colors ${errors.email ? 'border-red-500 bg-red-50' : 'border-slate-300 focus:border-blue-500'}`}
                              />
                            </div>
                            {errors.email && <p className="text-red-600 text-sm mt-1 flex items-center gap-1"><Icons.AlertCircle size={14}/> {errors.email}</p>}
                            <p className="text-slate-500 text-sm mt-2">â€»å—ä¿¡å¯èƒ½ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                         </div>
                      </div>
                    )}

                    {taskType === 'password' && (
                        <div className="space-y-6">
                            <div>
                                <label className="block font-bold text-slate-700 mb-2">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š</label>
                                <div className="relative">
                                    <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"><Icons.LockSimple size={20} /></div>
                                    <input
                                      type={showPassword ? "text" : "password"}
                                      value={password}
                                      onChange={(e) => setPassword(e.target.value)}
                                      placeholder="M3@zP7$q"
                                      className={`w-full pl-10 pr-12 py-3 border rounded-lg outline-none transition-colors ${errors.password ? 'border-red-500 bg-red-50' : 'border-slate-300 focus:border-blue-500'}`}
                                    />
                                    <button 
                                      type="button"
                                      onClick={() => setShowPassword(!showPassword)}
                                      className="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 p-1"
                                    >
                                      {showPassword ? <Icons.EyeOff size={20}/> : <Icons.Eye size={20}/>}
                                    </button>
                                </div>
                                
                                <div className="mt-2 flex gap-1 h-1">
                                    <div className={`flex-1 rounded-full ${password.length > 0 ? 'bg-red-400' : 'bg-slate-200'}`}></div>
                                    <div className={`flex-1 rounded-full ${password.length > 4 ? 'bg-yellow-400' : 'bg-slate-200'}`}></div>
                                    <div className={`flex-1 rounded-full ${password.length >= 8 ? 'bg-green-400' : 'bg-slate-200'}`}></div>
                                </div>

                                {errors.password && <p className="text-red-600 text-sm mt-1 flex items-center gap-1"><Icons.AlertCircle size={14}/> {errors.password}</p>}
                                <p className="text-slate-500 text-sm mt-2">â€»åŠè§’è‹±æ•°å­—8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                            </div>
                        </div>
                    )}

                    {taskType === 'profile' && (
                        <div className="space-y-8">
                            <div className="grid md:grid-cols-3 gap-4 items-center">
                                 <label className="font-medium text-slate-700">ãŠåå‰ <span className="bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded">å¿…é ˆ</span></label>
                                 <div className="md:col-span-2 flex gap-4">
                                    <input type="text" placeholder="å§“" value={lastName} onChange={e => setLastName(e.target.value)} className="flex-1 border border-slate-300 rounded-lg px-4 py-2 focus:border-blue-500 outline-none" />
                                    <input type="text" placeholder="å" value={firstName} onChange={e => setFirstName(e.target.value)} className="flex-1 border border-slate-300 rounded-lg px-4 py-2 focus:border-blue-500 outline-none" />
                                 </div>
                                 {errors.name && <p className="md:col-start-2 md:col-span-2 text-red-600 text-sm">{errors.name}</p>}
                            </div>

                            <div className="grid md:grid-cols-3 gap-4 items-center">
                                <label className="font-medium text-slate-700">é›»è©±ç•ªå·</label>
                                <div className="md:col-span-2 relative">
                                    <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"><Icons.Phone size={18} /></div>
                                    <input type="tel" placeholder="090-1234-5678" value={tel} onChange={e => setTel(e.target.value)} className="w-full border border-slate-300 rounded-lg pl-10 pr-4 py-2 focus:border-blue-500 outline-none" />
                                </div>
                                {errors.tel && <p className="md:col-start-2 md:col-span-2 text-red-600 text-sm">{errors.tel}</p>}
                            </div>

                            <div className="grid md:grid-cols-3 gap-4 items-start">
                                <label className="font-medium text-slate-700 pt-2">ã”ä½æ‰€</label>
                                <div className="md:col-span-2 space-y-3">
                                    <div className="flex gap-2 items-center">
                                        <Icons.MapPin size={18} className="text-slate-400"/>
                                        <input type="text" placeholder="123-4567" value={zip} onChange={e => setZip(e.target.value)} className="w-32 border border-slate-300 rounded-lg px-3 py-2 focus:border-blue-500 outline-none" />
                                        <button 
                                          type="button" 
                                          onClick={handleAddressSearch}
                                          className="text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg font-bold hover:bg-blue-100 border border-blue-200 transition-colors"
                                        >
                                          ä½æ‰€æ¤œç´¢
                                        </button>
                                    </div>
                                    {errors.zip && <p className="text-red-600 text-sm">{errors.zip}</p>}
                                    
                                    <div className="flex gap-2">
                                        <select value={pref} onChange={e => setPref(e.target.value)} className="border border-slate-300 rounded-lg px-3 py-2 bg-white">
                                            <option value="">éƒ½é“åºœçœŒ</option>
                                            <option value="Tokyo">æ±äº¬éƒ½</option>
                                            <option value="Osaka">å¤§é˜ªåºœ</option>
                                        </select>
                                        <input type="text" placeholder="å¸‚åŒºç”ºæ‘" value={city} onChange={e => setCity(e.target.value)} className="flex-1 border border-slate-300 rounded-lg px-3 py-2" />
                                    </div>
                                    <input type="text" placeholder="ç•ªåœ°" value={street} onChange={e => setStreet(e.target.value)} className="w-full border border-slate-300 rounded-lg px-3 py-2" />
                                    {errors.addr && <p className="text-red-600 text-sm">{errors.addr}</p>}
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="flex justify-center mt-10">
                      <button type="submit" className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-10 rounded-lg shadow-md transform transition hover:-translate-y-0.5 flex items-center gap-2">
                        <Icons.Check size={20} />
                        {taskType === 'password' ? 'è¨­å®šã™ã‚‹' : 'ç™»éŒ²ã™ã‚‹'}
                      </button>
                    </div>

                  </form>
                </div>
            );
        };

        // --- Component: Dashboard ---
        const Dashboard = ({ results, taskType, onRestart }) => {
            const feedback = generateFeedback(taskType, results);
            const timeData = [
                { name: 'æ‚ªã„UI', time: parseFloat((results.bad.timeTaken / 1000).toFixed(2)) },
                { name: 'è‰¯ã„UI', time: parseFloat((results.good.timeTaken / 1000).toFixed(2)) },
            ];
            const clickData = [
                { name: 'æ‚ªã„UI', clicks: results.bad.clickCount },
                { name: 'è‰¯ã„UI', clicks: results.good.clickCount },
            ];

            return (
                <div className="max-w-4xl mx-auto p-6">
                  <h1 className="text-3xl font-bold text-center mb-2 text-slate-800">ä½“é¨“çµ‚äº†ï¼ çµæœç™ºè¡¨</h1>
                  <p className="text-center text-slate-600 mb-8">{TASKS[taskType].title} ã«ãŠã‘ã‚‹ã‚ãªãŸã®æ“ä½œãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¾ã—ãŸã€‚</p>

                  <div className="grid md:grid-cols-2 gap-8 mb-8">
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                      <h3 className="text-lg font-semibold mb-4 text-center">å®Œäº†ã¾ã§ã®æ™‚é–“ (ç§’)</h3>
                      <div className="h-64">
                        <ResponsiveContainer width="100%" height="100%">
                          <BarChart data={timeData}>
                            <CartesianGrid strokeDasharray="3 3" />
                            <XAxis dataKey="name" />
                            <YAxis />
                            <Tooltip />
                            <Bar dataKey="time" fill="#3b82f6" name="æ™‚é–“(ç§’)" radius={[4, 4, 0, 0]} />
                          </BarChart>
                        </ResponsiveContainer>
                      </div>
                    </div>

                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                      <h3 className="text-lg font-semibold mb-4 text-center">ã‚¯ãƒªãƒƒã‚¯æ•°ãƒ»æ“ä½œæ•° (å›)</h3>
                      <div className="h-64">
                        <ResponsiveContainer width="100%" height="100%">
                          <BarChart data={clickData}>
                            <CartesianGrid strokeDasharray="3 3" />
                            <XAxis dataKey="name" />
                            <YAxis allowDecimals={false} />
                            <Tooltip />
                            <Bar dataKey="clicks" fill="#8b5cf6" name="ã‚¯ãƒªãƒƒã‚¯æ•°" radius={[4, 4, 0, 0]} />
                          </BarChart>
                        </ResponsiveContainer>
                      </div>
                    </div>
                  </div>

                  <div className="bg-indigo-50 border border-indigo-100 rounded-xl p-6 mb-8 relative overflow-hidden">
                    <div className="absolute top-0 right-0 p-4 opacity-10">
                      <Icons.CheckCircle2 size={100} className="text-indigo-600" />
                    </div>
                    <h3 className="text-xl font-bold text-indigo-900 mb-3 flex items-center gap-2">åˆ†æãƒ¬ãƒãƒ¼ãƒˆ</h3>
                    <div className="prose prose-indigo max-w-none">
                      <div className="whitespace-pre-line text-indigo-800 leading-relaxed font-mono text-sm bg-white p-4 border border-indigo-200 rounded">
                        {feedback}
                      </div>
                    </div>
                  </div>

                  <div className="flex justify-center">
                    <button onClick={onRestart} className="flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-8 py-3 rounded-full font-bold transition-all transform hover:scale-105">
                      <Icons.RefreshCw size={20} /> ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹
                    </button>
                  </div>
                </div>
            );
        };

        // --- Component: App (Main Logic) ---
        const App = () => {
            const [stage, setStage] = useState('intro');
            const [taskType, setTaskType] = useState('email');
            const [taskOrder, setTaskOrder] = useState([]);
            const [completedTasks, setCompletedTasks] = useState([]);
            const [isInstructionMinimized, setIsInstructionMinimized] = useState(false);
            
            const [results, setResults] = useState({
                bad: { clickCount: 0, timeTaken: 0, mistakes: 0 },
                good: { clickCount: 0, timeTaken: 0, mistakes: 0 }
            });

            const startTimeRef = useRef(0);
            const clickCountRef = useRef(0);

            useEffect(() => {
                const handleGlobalClick = () => {
                    if (stage === 'task-bad' || stage === 'task-good') {
                        clickCountRef.current += 1;
                    }
                };
                window.addEventListener('click', handleGlobalClick);
                return () => window.removeEventListener('click', handleGlobalClick);
            }, [stage]);

            const handleTaskSelection = (type) => {
                setTaskType(type);
                setStage('order-selection');
            };

            const handleOrderSelection = (firstStyle) => {
                const order = firstStyle === 'bad' ? ['bad', 'good'] : ['good', 'bad'];
                setTaskOrder(order);
                const firstStage = order[0] === 'bad' ? 'briefing-bad' : 'briefing-good';
                setStage(firstStage);
            };

            const startTask = (nextStage) => {
                startTimeRef.current = Date.now();
                clickCountRef.current = 0;
                setIsInstructionMinimized(false);
                setStage(nextStage);
            };

            const completeTask = (currentStyle) => {
                const endTime = Date.now();
                const timeTaken = endTime - startTimeRef.current;
                
                setResults(prev => ({
                    ...prev,
                    [currentStyle]: {
                        ...prev[currentStyle],
                        clickCount: clickCountRef.current,
                        timeTaken,
                    }
                }));

                const newCompleted = [...completedTasks, currentStyle];
                setCompletedTasks(newCompleted);

                const remainingTask = taskOrder.find(t => !newCompleted.includes(t));
                if (remainingTask) {
                    setStage(remainingTask === 'bad' ? 'briefing-bad' : 'briefing-good');
                } else {
                    setStage('results');
                }
            };

            const handleMistake = (currentStyle) => {
                setResults(prev => ({
                    ...prev,
                    [currentStyle]: { ...prev[currentStyle], mistakes: prev[currentStyle].mistakes + 1 }
                }));
            };

            const resetApp = () => {
                setResults({
                    bad: { clickCount: 0, timeTaken: 0, mistakes: 0 },
                    good: { clickCount: 0, timeTaken: 0, mistakes: 0 }
                });
                setCompletedTasks([]);
                setTaskOrder([]);
                setStage('intro');
            };

            const renderBriefing = (type) => {
                const isFirst = completedTasks.length === 0;
                return (
                    <div className="max-w-2xl mx-auto text-center mt-20 p-8 bg-white rounded-2xl shadow-xl border border-slate-100 animate-fade-in">
                        <div className={`mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-6 ${type === 'bad' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>
                            {type === 'bad' ? <Icons.AlertTriangle size={32} /> : <Icons.CheckCircle size={32} />}
                        </div>
                        <h2 className="text-3xl font-bold mb-2">
                            {type === 'bad' ? 'æ‚ªã„UI (Bad UI)' : 'è‰¯ã„UI (Good UI)'}
                            <span className="text-lg font-normal text-slate-500 ml-2">- {isFirst ? 'å‰åŠæˆ¦' : 'å¾ŒåŠæˆ¦'}</span>
                        </h2>
                        {!isFirst && (
                           <p className="mb-6 text-slate-500 bg-slate-100 py-2 px-4 rounded-lg inline-block">
                             ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼æ¬¡ã¯æ¯”è¼ƒã®ãŸã‚ã«<strong>{type === 'bad' ? 'ä½¿ã„ã«ãã„ãƒ‡ã‚¶ã‚¤ãƒ³' : 'ç†æƒ³çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³'}</strong>ã‚’ä½“é¨“ã—ã¾ã™ã€‚
                           </p>
                        )}
                        <div className="text-lg text-slate-600 mb-8 mt-4 bg-slate-50 p-4 rounded-lg border border-slate-200 text-left">
                          <p className="font-bold text-slate-800 mb-2 border-b border-slate-200 pb-2">ğŸ“ ãƒŸãƒƒã‚·ãƒ§ãƒ³æŒ‡ç¤ºæ›¸</p>
                          <p className="whitespace-pre-line font-medium">{TASKS[taskType].instruction}</p>
                        </div>
                        <button onClick={() => startTask(type === 'bad' ? 'task-bad' : 'task-good')}
                          className={`px-8 py-3 rounded-full font-bold text-white transition-transform hover:scale-105 shadow-lg ${type === 'bad' ? 'bg-red-600 hover:bg-red-700' : 'bg-blue-600 hover:bg-blue-700'}`}>
                          {type === 'bad' ? 'æ‚ªã„UIã‚’ä½“é¨“ã™ã‚‹' : 'è‰¯ã„UIã‚’ä½“é¨“ã™ã‚‹'}
                        </button>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col">
                    {!stage.startsWith('task-') && (
                        <header className="bg-white border-b border-slate-200 py-4 px-6">
                            <div className="max-w-6xl mx-auto flex items-center gap-2">
                                <Icons.MousePointer2 className="text-blue-600" />
                                <h1 className="font-bold text-xl tracking-tight">UI/UX Lab. <span className="text-slate-400 font-normal ml-2">æƒ…å ±â…  æ•™æã‚¢ãƒ—ãƒª</span></h1>
                            </div>
                        </header>
                    )}

                    {stage.startsWith('task-') && (
                        <div className="bg-slate-900 text-white py-2 px-4 text-center sticky top-0 z-50 shadow-md flex justify-between items-center">
                            <div className="w-1/3 text-left pl-4 text-gray-400 text-xs">Mode: {stage === 'task-bad' ? 'Bad UI' : 'Good UI'} | Genre: {TASKS[taskType].title}</div>
                            <div className="w-1/3 text-center"><span className="text-xs bg-slate-800 px-2 py-1 rounded text-slate-300">ãƒŸãƒƒã‚·ãƒ§ãƒ³ä¸­</span></div>
                            <div className="w-1/3 text-right pr-4"><button onClick={resetApp} className="text-xs text-slate-400 hover:text-white underline">ä¸­æ–­ã™ã‚‹</button></div>
                        </div>
                    )}

                    <main className="flex-grow relative overflow-auto">
                        {stage === 'intro' && (
                            <div className="h-full flex flex-col items-center justify-center p-6">
                                <div className="text-center max-w-3xl">
                                    <span className="inline-block py-1 px-3 rounded-full bg-blue-100 text-blue-700 text-sm font-semibold mb-4">é«˜æ ¡ æƒ…å ±â…  å®Ÿç¿’</span>
                                    <h1 className="text-5xl font-extrabold mb-6 tracking-tight text-slate-900">æ‚ªã„UI vs è‰¯ã„UI <br/><span className="text-blue-600">ä½“é¨“å‹æ¯”è¼ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</span></h1>
                                    <p className="text-xl text-slate-600 mb-10 leading-relaxed">ã€Œä½¿ã„ã«ãã„ã€ã¨ã€Œä½¿ã„ã‚„ã™ã„ã€ã‚’å®Ÿéš›ã«æ“ä½œã—ã¦æ¯”è¼ƒã—ã¾ã™ã€‚<br/>ãƒ‡ã‚¶ã‚¤ãƒ³ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’ãƒ‡ãƒ¼ã‚¿ã§ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
                                    <button onClick={() => setStage('task-selection')} className="group relative flex items-center gap-4 p-6 bg-blue-600 text-white rounded-full hover:bg-blue-700 hover:shadow-xl transition-all pr-10 pl-10 shadow-lg mx-auto">
                                        <span className="text-lg font-bold">å®Ÿç¿’ã‚’ã¯ã˜ã‚ã‚‹</span><Icons.ArrowRight className="group-hover:translate-x-1 transition-transform" size={24} />
                                    </button>
                                </div>
                            </div>
                        )}

                        {stage === 'task-selection' && (
                           <div className="h-full flex flex-col items-center py-12 px-6 bg-slate-50">
                              <h2 className="text-3xl font-bold mb-2 text-slate-800">å®Ÿç¿’ãƒ†ãƒ¼ãƒã‚’é¸ã‚“ã§ãã ã•ã„</h2>
                              <p className="text-slate-600 mb-10">èˆˆå‘³ã®ã‚ã‚‹ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦æ¯”è¼ƒã‚’é–‹å§‹ã—ã¾ã™ã€‚</p>
                              <div className="grid md:grid-cols-3 gap-6 w-full max-w-5xl">
                                 <button onClick={() => handleTaskSelection('email')} className="bg-white p-8 rounded-2xl border-2 border-slate-200 hover:border-blue-500 hover:shadow-xl transition-all text-left flex flex-col h-full">
                                    <div className="bg-blue-50 w-14 h-14 rounded-xl flex items-center justify-center text-blue-600 mb-6"><Icons.Mail size={28}/></div>
                                    <h3 className="text-xl font-bold mb-2">{TASKS.email.title}</h3>
                                    <p className="text-slate-500 text-sm leading-relaxed flex-grow">{TASKS.email.description}</p>
                                    <div className="mt-6 pt-4 border-t border-slate-100 text-blue-600 font-semibold text-sm flex items-center gap-1">é¸æŠã™ã‚‹ <Icons.ArrowRight size={16}/></div>
                                 </button>
                                 <button onClick={() => handleTaskSelection('password')} className="bg-white p-8 rounded-2xl border-2 border-slate-200 hover:border-indigo-500 hover:shadow-xl transition-all text-left flex flex-col h-full">
                                    <div className="bg-indigo-50 w-14 h-14 rounded-xl flex items-center justify-center text-indigo-600 mb-6"><Icons.LockSimple size={28}/></div>
                                    <h3 className="text-xl font-bold mb-2">{TASKS.password.title}</h3>
                                    <p className="text-slate-500 text-sm leading-relaxed flex-grow">{TASKS.password.description}</p>
                                    <div className="mt-6 pt-4 border-t border-slate-100 text-indigo-600 font-semibold text-sm flex items-center gap-1">é¸æŠã™ã‚‹ <Icons.ArrowRight size={16}/></div>
                                 </button>
                                 <button onClick={() => handleTaskSelection('profile')} className="bg-white p-8 rounded-2xl border-2 border-slate-200 hover:border-emerald-500 hover:shadow-xl transition-all text-left flex flex-col h-full">
                                    <div className="bg-emerald-50 w-14 h-14 rounded-xl flex items-center justify-center text-emerald-600 mb-6"><Icons.User size={28}/></div>
                                    <h3 className="text-xl font-bold mb-2">{TASKS.profile.title}</h3>
                                    <p className="text-slate-500 text-sm leading-relaxed flex-grow">{TASKS.profile.description}</p>
                                    <div className="mt-6 pt-4 border-t border-slate-100 text-emerald-600 font-semibold text-sm flex items-center gap-1">é¸æŠã™ã‚‹ <Icons.ArrowRight size={16}/></div>
                                 </button>
                              </div>
                           </div>
                        )}

                        {stage === 'order-selection' && (
                          <div className="h-full flex flex-col items-center justify-center p-6 bg-slate-50">
                             <h2 className="text-3xl font-bold mb-8 text-slate-800">ã©ã¡ã‚‰ã‹ã‚‰ä½“é¨“ã—ã¾ã™ã‹ï¼Ÿ</h2>
                             <p className="text-slate-600 mb-12 max-w-lg text-center">ä½“é¨“ã®é †ç•ªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
                             <div className="grid md:grid-cols-2 gap-6 w-full max-w-4xl">
                                <button onClick={() => handleOrderSelection('bad')} className="group flex flex-col items-center p-8 bg-white rounded-2xl border-2 border-slate-200 hover:border-red-400 hover:shadow-xl transition-all">
                                  <div className="w-20 h-20 rounded-full bg-red-50 text-red-500 flex items-center justify-center mb-4 group-hover:bg-red-100 transition-colors"><Icons.ThumbsDown size={40} /></div>
                                  <h3 className="text-xl font-bold mb-2 text-slate-800">æ‚ªã„UI ã‹ã‚‰å§‹ã‚ã‚‹</h3>
                                  <p className="text-center text-slate-500 text-sm leading-relaxed">ã€Œä½¿ã„ã«ãã•ã€ã‚’å…ˆã«ä½“é¨“ã—ã€<br/>æ”¹å–„ã•ã‚ŒãŸUIã®å¿«é©ã•ã‚’å®Ÿæ„Ÿã™ã‚‹ã‚³ãƒ¼ã‚¹ã€‚</p>
                                  <span className="mt-6 text-red-600 font-semibold text-sm flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">ã“ã¡ã‚‰ã‚’é¸æŠ <Icons.ArrowRight size={16} /></span>
                                </button>
                                <button onClick={() => handleOrderSelection('good')} className="group flex flex-col items-center p-8 bg-white rounded-2xl border-2 border-slate-200 hover:border-blue-400 hover:shadow-xl transition-all">
                                  <div className="w-20 h-20 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors"><Icons.ThumbsUp size={40} /></div>
                                  <h3 className="text-xl font-bold mb-2 text-slate-800">è‰¯ã„UI ã‹ã‚‰å§‹ã‚ã‚‹</h3>
                                  <p className="text-center text-slate-500 text-sm leading-relaxed">ã€Œç†æƒ³å½¢ã€ã‚’å…ˆã«ä½“é¨“ã—ã€<br/>æ‚ªã„UIã®ã‚¹ãƒˆãƒ¬ã‚¹ã‚’ç—›æ„Ÿã™ã‚‹ã‚³ãƒ¼ã‚¹ã€‚</p>
                                  <span className="mt-6 text-blue-600 font-semibold text-sm flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">ã“ã¡ã‚‰ã‚’é¸æŠ <Icons.ArrowRight size={16} /></span>
                                </button>
                             </div>
                          </div>
                        )}

                        {stage === 'briefing-bad' && renderBriefing('bad')}
                        
                        {stage === 'task-bad' && (
                          <div className="h-full bg-gray-200 p-4 md:p-8 flex justify-center items-center">
                             <div className="w-full max-w-[800px] h-[600px] bg-white shadow-2xl overflow-hidden border border-gray-400 relative flex flex-col">
                                <div className="bg-gray-300 border-b border-gray-400 p-1 flex items-center gap-1 shrink-0">
                                  <div className="w-3 h-3 rounded-full bg-red-400 border border-red-500"></div>
                                  <div className="w-3 h-3 rounded-full bg-yellow-400 border border-yellow-500"></div>
                                  <div className="w-3 h-3 rounded-full bg-green-400 border border-green-500"></div>
                                  <span className="ml-2 text-xs text-gray-600">Legacy System v1.0</span>
                                </div>
                                <div className="flex-grow overflow-auto relative">
                                  <BadForm taskType={taskType} onComplete={() => completeTask('bad')} onMistake={() => handleMistake('bad')} />
                                </div>
                             </div>
                          </div>
                        )}

                        {stage === 'briefing-good' && renderBriefing('good')}

                        {stage === 'task-good' && (
                          <div className="h-full bg-slate-100 p-4 md:p-8 flex justify-center items-center">
                             <div className="w-full max-w-4xl bg-white shadow-xl rounded-xl overflow-hidden min-h-[400px] max-h-full overflow-auto">
                                <GoodForm taskType={taskType} onComplete={() => completeTask('good')} onMistake={() => handleMistake('good')} />
                             </div>
                          </div>
                        )}

                        {stage === 'results' && <Dashboard results={results} taskType={taskType} onRestart={resetApp} />}

                        {(stage === 'task-bad' || stage === 'task-good') && (
                            <div className="fixed bottom-4 right-4 z-50 flex flex-col items-end">
                                <div className={`bg-white rounded-lg shadow-2xl border-2 border-slate-800 overflow-hidden transition-all duration-300 ${isInstructionMinimized ? 'w-48' : 'w-80'}`}>
                                  <div className="bg-slate-800 text-white p-3 flex justify-between items-center cursor-pointer hover:bg-slate-700 transition-colors" onClick={() => setIsInstructionMinimized(!isInstructionMinimized)}>
                                    <span className="font-bold text-sm flex items-center gap-2"><Icons.ClipboardList size={16} className="text-blue-300"/> ãƒŸãƒƒã‚·ãƒ§ãƒ³æŒ‡ç¤ºæ›¸</span>
                                    {isInstructionMinimized ? <Icons.ChevronUp size={18} /> : <Icons.ChevronDown size={18} />}
                                  </div>
                                  {!isInstructionMinimized && (
                                    <div className="p-5 bg-yellow-50 text-slate-800 max-h-64 overflow-y-auto">
                                      <div className="text-xs font-bold text-slate-500 mb-2 uppercase tracking-wider border-b border-yellow-200 pb-1">Target Data</div>
                                      <p className="whitespace-pre-line text-sm font-medium leading-relaxed font-mono">{TASKS[taskType].instruction}</p>
                                      <p className="text-[10px] text-slate-400 mt-3 text-right">ã“ã®é€šã‚Šã«å…¥åŠ›ã—ã¦ãã ã•ã„</p>
                                    </div>
                                  )}
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>